---
layout: post
title: Zsh 终极配置指南
subtitle: 从安装到全栈开发环境的完整教程
categories: [Shell, Development]
tags: [zsh, oh-my-zsh, terminal, development]
date: 2026-02-12 00:00:00 +0800
---

# Zsh 终极配置指南：从安装到全栈开发环境

Zsh（Z Shell）是一个功能强大且高度可定制的 shell。虽然开箱即用的体验不如 Fish，但通过安装几个核心插件，你可以获得甚至超越 Fish 的开发效率。本指南将带你从零开始，打造一个集成主流开发工具的高效环境。

## 1. 安装 Zsh 与 Oh My Zsh

### 操作系统安装命令

- **macOS**（已预装 Zsh）：

```bash
# 如果需要更新到最新版本
brew install zsh
```

- **Ubuntu / Debian**：

```bash
sudo apt update
sudo apt install zsh
```

### 设置为默认 Shell

安装完成后，建议将 Zsh 设置为默认 shell：

1. **查看 zsh 路径**：

```bash
which zsh
```

2. **将 zsh 添加到可信 shell 列表**（如果不在列表中）：

```bash
echo $(which zsh) | sudo tee -a /etc/shells
```

3. **修改默认 shell**：

```bash
chsh -s $(which zsh)
```

### 安装 Oh My Zsh

**Oh My Zsh** 是 Zsh 最受欢迎的框架，它提供了插件管理、主题支持和大量预配置功能。

```bash
sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
```

安装完成后，Zsh 的配置文件位于 `~/.zshrc`。

---

## 2. 安装效率三剑客插件

Zsh 的核心优势在于这三个组件的组合：**zsh-autosuggestions**（命令预测）、**zsh-syntax-highlighting**（语法高亮）、**zsh-history-substring-search**（历史搜索）。它们能完美复刻 Fish 的开箱即用体验，甚至更强大。再加上系统级工具 **fzf**，你将获得无与伦比的效率。

### 系统工具：fzf（模糊搜索）

首先安装官方的 Git 版本（推荐，自动配置快捷键）：

```bash
# 1. 下载 fzf
git clone --depth 1 https://github.com/junegunn/fzf.git ~/.fzf

# 2. 运行安装脚本（一路回车按 Y 即可）
~/.fzf/install
```

> **功能说明**：
>
> - `Ctrl+R` ：模糊搜索历史命令（上下键选择，回车执行）
> - `Ctrl+T` ：模糊搜索文件（在当前目录及子目录中搜索）
> - `Ctrl+Alt+C`：模糊搜索目录并进入

> **注意**：fzf 是一个系统级工具，不是 Oh My Zsh 的插件。安装脚本会自动在 `~/.zshrc` 中注入配置。

### 第一剑：zsh-autosuggestions（Fish 同款灰色命令预测）

根据你的历史记录，用灰色的字在光标后面预测你要敲的命令。按右方向键（`→`）即可一键补全。

```bash
git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions
```

### 第二剑：zsh-syntax-highlighting（Fish 同款红绿语法高亮）

敲对命令是绿色，敲错是红色，极大降低敲错命令的概率。

```bash
git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting
```

### 第三剑：zsh-history-substring-search（上下键历史搜索）

这个插件让上下方向键产生强大的功能：输入命令前缀后，按上/下键会在历史记录中搜索以该前缀开头的命令。比如你敲 `ssh`，然后按上键，就会显示最近用过的所有 `ssh` 开头的命令。

```bash
git clone https://github.com/zsh-users/zsh-history-substring-search ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-history-substring-search
```

### 启用这些插件

1. **打开配置文件**：

```bash
nano ~/.zshrc
```

2. **找到 `plugins=(git)` 这一行**（大概在第 70 行左右），修改为：

```bash
plugins=(
    git
    zsh-autosuggestions
    zsh-syntax-highlighting
    zsh-history-substring-search
)
```

> **重要**：`zsh-syntax-highlighting` 和 `zsh-history-substring-search` 都应该放在最后面。

3. **保存并重载配置**：

```bash
# 保存退出（Ctrl+O, Enter, Ctrl+X）
source ~/.zshrc
```

---

## 3. 验收你的插件体验

现在你的 Zsh 已经具备 Fish 的所有开箱体验，甚至更强大。快试试下面这几个骚操作：

1. **体验上下键历史搜索**：

打开终端，随便敲几个字母，比如：

```bash
$ ssh
```

现在什么都别敲，直接按上键 `↑`。你会看到历史记录中所有以 `ssh` 开头的命令瞬间出现。继续按上键可以向前遍历，按下键 `↓` 可以向后遍历。找到你要的命令后，按回车执行。

这个功能极其强大，尤其是对那些常用的长命令（比如带一堆参数的 `docker`、`kubectl` 等）。

2. **体验 fzf 模糊搜索历史**：

按下 `Ctrl + R`，你会看到下方弹出一个交互式搜索框。随便敲几个关键词（比如 `git`），它会瞬间从历史记录里把相关命令揪出来。上下键选择，回车执行。

> **对比**：`Ctrl+R`（fzf 模糊搜索）vs `↑` 键（前缀搜索）
>
> - fzf：强大的模糊搜索，支持多个关键词组合
> - 上下键：快速的前缀搜索，适合已知命令前缀的场景

3. **体验 fzf 文件搜索**：

按下 `Ctrl + T`，可以在当前目录下瞬间模糊搜索文件。非常适合用来快速填充命令行中的文件路径。

4. **体验命令预测（灰色预测）**：

随便敲几个字母，比如 `gi`，你会看到后面出现了灰色的预测命令（可能是 `git`）。按键盘上的 `→`（右方向键）就能一键补全。也可以按 `Ctrl+F` 补全（如果你之前配置了这个快捷键）。

5. **体验语法高亮**：

敲一个正确的命令，文字是绿色的；故意敲错一个命令，文字是红色的。这让你在敲命令时就能立刻发现拼写错误。

---

## 4. 完整的多语言开发环境配置

Zsh 的环境变量配置与 Fish 类似，但使用的是标准的 Bash 风格。编辑 `~/.zshrc` 文件来配置环境变量。本章将涵盖现代开发中的所有主流语言。

---

### Python 生态（uv + pyenv）

#### uv（Python 包管理器 - 推荐首选）

Astral 出品的极速 Python 包管理工具，比 pip 快 10-100 倍：

```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
```

在 `~/.zshrc` 中配置：

```bash
export PATH="$HOME/.local/bin:$PATH"
```

使用示例：

```bash
# 创建虚拟环境
uv venv myenv

# 安装包
uv pip install requests numpy

# 运行脚本
uv run script.py
```

#### pyenv（Python 版本管理）

如果需要管理多个 Python 版本：

```bash
# macOS
brew install pyenv

# Ubuntu/Debian
curl https://pyenv.run | bash
```

在 `~/.zshrc` 中配置：

```bash
export PYENV_ROOT="$HOME/.pyenv"
export PATH="$PYENV_ROOT/bin:$PATH"
eval "$(pyenv init -)"
```

常用命令：

```bash
pyenv install 3.12.0
pyenv global 3.12.0
pyenv versions
```

#### Poetry（项目依赖管理）

更专业的 Python 项目管理工具：

```bash
curl -sSL https://install.python-poetry.org | python3 -
```

在 `~/.zshrc` 中配置：

```bash
export PATH="$HOME/.local/bin:$PATH"
```

使用示例：

```bash
poetry new myproject
poetry add requests
poetry install
poetry run python main.py
```

---

### Node.js / JavaScript 生态

#### fnm（Node.js 版本管理 - 推荐）

比 nvm 快得多的 Node 管理器，用 Rust 编写：

```bash
curl -fsSL https://fnm.vercel.app/install | bash
```

在 `~/.zshrc` 中配置：

```bash
eval "$(fnm env --use-on-cd)"
```

常用命令：

```bash
fnm install 20
fnm use 20
fnm list
```

#### Bun（JavaScript Runtime）

现代的 JavaScript 运行时，比 Node.js 更快：

```bash
curl -fsSL https://bun.sh/install | bash
```

在 `~/.zshrc` 中配置：

```bash
export BUN_INSTALL="$HOME/.bun"
export PATH="$BUN_INSTALL/bin:$PATH"
```

使用示例：

```bash
bun install  # 替代 npm install
bun run dev  # 运行脚本
bun test     # 运行测试
```

#### pnpm（包管理器 - npm 替代）

更快、更节省空间的包管理器：

```bash
npm install -g pnpm
# 或
curl -fsSL https://get.pnpm.io/install.sh | sh -
```

在 `~/.zshrc` 中配置（如果需要）：

```bash
export PNPM_HOME="$HOME/.local/share/pnpm"
export PATH="$PNPM_HOME:$PATH"
```

---

### Rust 生态

#### Rustup（Rust 版本管理）

官方的 Rust 安装和版本管理工具：

```bash
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
```

在 `~/.zshrc` 中配置：

```bash
export PATH="$HOME/.cargo/bin:$PATH"
export RUSTFLAGS="-C target-cpu=native"  # 性能优化
```

常用命令：

```bash
rustup update
rustup toolchain install nightly
rustup component add rust-analyzer
cargo new myproject
cargo build --release
```

#### Cargo-binstall（加速编译）

加速 Cargo 二进制工具安装：

```bash
curl -L --proto '=https' --tlsv1.2 -sSf https://raw.githubusercontent.com/cargo-bins/cargo-binstall/main/install-from-binstall.sh | bash
```

---

### Go 生态

#### 官方 Go 安装

```bash
# 从官网下载对应版本，或使用包管理器
brew install go         # macOS
sudo apt install golang-go  # Ubuntu
```

在 `~/.zshrc` 中配置：

```bash
export GOPATH="$HOME/go"
export GOROOT="/usr/local/go"
export PATH="$GOROOT/bin:$GOPATH/bin:$PATH"
export GO111MODULE=on  # 启用模块模式
export GOPROXY="https://goproxy.cn"  # 国内用户可使用国内代理
```

常用命令：

```bash
go mod init mymodule
go get github.com/user/package
go build
go run main.go
```

#### Mise（Go 版本管理）

也可用 Mise（见下文）管理 Go 版本。

---

### Java 生态

#### SDKMAN!（Java 版本与工具管理 - 推荐）

管理 JDK、Maven、Gradle、Kotlin 等的统一工具：

```bash
curl -s "https://get.sdkman.io" | bash
```

在 `~/.zshrc` 中添加（安装后自动添加）：

```bash
export SDKMAN_DIR="$HOME/.sdkman"
[[ -s "$HOME/.sdkman/bin/sdkman-init.sh" ]] && source "$HOME/.sdkman/bin/sdkman-init.sh"
```

常用命令：

```bash
sdk list java              # 列出可用 JDK
sdk install java 21.0.1-open
sdk use java 21.0.1-open
sdk list maven
sdk install maven 3.9.5
```

#### Temurin OpenJDK（推荐的 JDK）

最可靠的开源 JDK：

```bash
brew install temurin       # macOS
sudo apt install temurin-21-jdk  # Ubuntu
```

配置：

```bash
export JAVA_HOME=$(/usr/libexec/java_home)  # macOS
# 或 Ubuntu:
export JAVA_HOME="/usr/lib/jvm/temurin-21-jdk-amd64"
```

#### Maven（构建工具）

```bash
brew install maven         # macOS
sudo apt install maven     # Ubuntu
```

配置（可选）：

```bash
export MAVEN_HOME="/usr/local/opt/maven"
export PATH="$MAVEN_HOME/bin:$PATH"
```

#### Gradle（构建工具）

```bash
brew install gradle        # macOS
sudo apt install gradle    # Ubuntu
```

---

### PHP 生态

#### PHP（使用版本管理）

```bash
# macOS
brew install php@8.3

# Ubuntu
sudo apt install php8.3 php8.3-cli php8.3-fpm
```

在 `~/.zshrc` 中配置：

```bash
# macOS
export PATH="/usr/local/opt/php@8.3/bin:$PATH"

# 或使用 Mise 管理 PHP 版本（见下文）
```

#### Composer（PHP 包管理器）

```bash
curl -sS https://getcomposer.org/installer | php
sudo mv composer.phar /usr/local/bin/composer
```

配置：

```bash
export PATH="$HOME/.composer/vendor/bin:$PATH"
```

使用示例：

```bash
composer create-project symfony/skeleton myapp
composer install
composer require monolog/monolog
```

#### Laravel（流行框架）

```bash
composer global require laravel/installer
laravel new myapp
cd myapp && php artisan serve
```

---

### Ruby 生态

#### rbenv（Ruby 版本管理 - 推荐）

```bash
# macOS
brew install rbenv ruby-build

# Ubuntu
curl -fsSL https://github.com/rbenv/rbenv-installer/raw/main/bin/rbenv-installer | bash
```

在 `~/.zshrc` 中配置：

```bash
export PATH="$HOME/.rbenv/bin:$PATH"
eval "$(rbenv init -)"
```

常用命令：

```bash
rbenv install 3.3.0
rbenv global 3.3.0
rbenv versions
```

#### Bundler（Ruby 依赖管理）

```bash
gem install bundler
```

使用示例：

```bash
bundle init
bundle add rails
bundle install
bundle exec rails new myapp
```

#### Rails（流行框架）

```bash
gem install rails
rails new myapp
cd myapp && bin/rails server
```

---

### C/C++ 开发

#### GCC 与 G++

```bash
# macOS
brew install gcc

# Ubuntu
sudo apt install build-essential gcc g++
```

在 `~/.zshrc` 中配置：

```bash
export CC=gcc
export CXX=g++
export CFLAGS="-O3 -march=native"
export CXXFLAGS="-O3 -march=native"
```

#### CMake（构建系统）

```bash
# macOS
brew install cmake

# Ubuntu
sudo apt install cmake
```

使用示例：

```bash
cmake -B build
cmake --build build
./build/myapp
```

#### LLVM/Clang（现代编译器）

```bash
# macOS
brew install llvm

# Ubuntu
sudo apt install clang llvm
```

配置：

```bash
export CC=clang
export CXX=clang++
```

---

### Lua（游戏开发、嵌入式）

#### LuaRocks（包管理器）

```bash
# macOS
brew install luarocks

# Ubuntu
sudo apt install luarocks
```

使用：

```bash
luarocks install inspect
luarocks new-module mymodule
```

---

### Kotlin（JVM 语言）

```bash
brew install kotlin        # macOS
```

在 `~/.zshrc` 中配置（如果需要）：

```bash
export PATH="/usr/local/opt/kotlin/bin:$PATH"
```

---

### Mise（多语言版本管理器 - 超级工具）

如果你想用一个统一的工具管理所有语言版本，强烈推荐 **Mise**（前身是 asdf）：

#### 安装 Mise

```bash
curl https://mise.jdx.dev/install.sh | sh
```

在 `~/.zshrc` 中配置：

```bash
eval "$(mise activate zsh)"
```

#### 使用 Mise 管理多个语言

```bash
# 查看可用工具
mise list-all

# 安装工具
mise install python@3.12
mise install node@20
mise install go@1.21
mise install java@21

# 设置全局版本
mise use -g python@3.12
mise use -g node@20

# 在项目目录创建 .mise.toml 配置项目版本
mise use python@3.11  # 在项目目录自动使用该版本
```

`.mise.toml` 配置示例：

```toml
[tools]
python = "3.11"
node = "20"
go = "1.21"
```

---

### Docker（容器化开发）

#### 安装 Docker Desktop

```bash
# macOS & Windows
# 从官网下载 Docker Desktop: https://www.docker.com/products/docker-desktop

# Ubuntu
sudo apt install docker.io docker-compose
sudo usermod -aG docker $USER
```

在 `~/.zshrc` 中配置（可选）：

```bash
export DOCKER_BUILDKIT=1
export COMPOSE_DOCKER_CLI_BUILD=1
```

常用命令：

```bash
docker build -t myimage .
docker run -it myimage
docker-compose up
```

---

### Database 工具

#### PostgreSQL

```bash
# macOS
brew install postgresql

# Ubuntu
sudo apt install postgresql postgresql-contrib
```

#### MySQL / MariaDB

```bash
# macOS
brew install mysql

# Ubuntu
sudo apt install mysql-server
```

#### SQLite

```bash
# macOS
brew install sqlite

# Ubuntu
sudo apt install sqlite3
```

#### DBeaver（数据库管理 GUI）

```bash
# macOS
brew install --cask dbeaver-community

# 或从官网下载: https://dbeaver.io/download/
```

---

### 容器编排与服务管理

#### Kubernetes (kubectl)

```bash
# macOS
brew install kubectl

# Ubuntu
sudo apt install kubectl
```

配置：

```bash
export KUBECONFIG=$HOME/.kube/config
```

#### Helm（Kubernetes 包管理）

```bash
brew install helm        # macOS
```

#### Docker Compose

```bash
# 通常随 Docker Desktop 一起安装
docker-compose --version
```

---

## 5. 完整的 .zshrc 示例

你的配置文件位于 `~/.zshrc`。以下是一个整合了上述工具的配置模板。将以下内容追加到你的 `~/.zshrc` 文件中（通常在 Oh My Zsh 初始化代码之后）：

```bash
# ==================== Python 环境配置 ====================

# uv (Python 包管理器)
export PATH="$HOME/.local/bin:$PATH"

# pyenv (Python 版本管理，如果安装)
# export PYENV_ROOT="$HOME/.pyenv"
# export PATH="$PYENV_ROOT/bin:$PATH"
# eval "$(pyenv init -)"

# Poetry
export PATH="$HOME/.local/bin:$PATH"

# ==================== Node.js 环境配置 ====================

# fnm (Node.js 版本管理)
eval "$(fnm env --use-on-cd)"

# Bun
export BUN_INSTALL="$HOME/.bun"
export PATH="$BUN_INSTALL/bin:$PATH"

# pnpm (如果使用)
export PNPM_HOME="$HOME/.local/share/pnpm"
export PATH="$PNPM_HOME:$PATH"

# ==================== Rust 环境配置 ====================

# Rustup
export PATH="$HOME/.cargo/bin:$PATH"
export RUSTFLAGS="-C target-cpu=native"

# ==================== Go 环境配置 ====================

export GOPATH="$HOME/go"
export GOROOT="/usr/local/go"
export PATH="$GOROOT/bin:$GOPATH/bin:$PATH"
export GO111MODULE=on
# 国内用户可使用国内代理
# export GOPROXY="https://goproxy.cn"

# ==================== Java 环境配置 ====================

# SDKMAN (Java 版本管理，自动添加)
# export SDKMAN_DIR="$HOME/.sdkman"
# [[ -s "$HOME/.sdkman/bin/sdkman-init.sh" ]] && source "$HOME/.sdkman/bin/sdkman-init.sh"

# Java 主目录 (根据安装方式调整)
# export JAVA_HOME=$(/usr/libexec/java_home)  # macOS
# export JAVA_HOME="/usr/lib/jvm/temurin-21-jdk-amd64"  # Ubuntu

# Maven (如果安装)
# export MAVEN_HOME="/usr/local/opt/maven"
# export PATH="$MAVEN_HOME/bin:$PATH"

# ==================== PHP 环境配置 ====================

# PHP (如果使用 Homebrew)
# export PATH="/usr/local/opt/php@8.3/bin:$PATH"

# Composer
export PATH="$HOME/.composer/vendor/bin:$PATH"

# ==================== Ruby 环境配置 ====================

# rbenv (Ruby 版本管理)
# export PATH="$HOME/.rbenv/bin:$PATH"
# eval "$(rbenv init -)"

# ==================== C/C++ 环境配置 ====================

# export CC=gcc
# export CXX=g++
# export CFLAGS="-O3 -march=native"
# export CXXFLAGS="-O3 -march=native"

# ==================== Mise (多语言版本管理器) ====================

# 如果使用 Mise 统一管理版本
# eval "$(mise activate zsh)"

# ==================== Docker ====================

export DOCKER_BUILDKIT=1
export COMPOSE_DOCKER_CLI_BUILD=1

# ==================== 别名 (Aliases) ====================

alias ls='ls --color=auto'
alias g='git'
alias vim='nvim'
alias ll='ls -lh'
alias la='ls -la'

# Python aliases
alias py='python3'
alias venv='python3 -m venv'

# Node aliases
alias ni='npm install'
alias nr='npm run'
alias nd='npm run dev'

# Docker aliases
alias dc='docker-compose'
alias d='docker'

# ==================== 其他优化 ====================

# 关闭自动更新提示（可选）
# DISABLE_AUTO_UPDATE="true"

# 设置历史记录行数
HISTSIZE=10000
SAVEHIST=10000
```

> **特别注意**：根据你的项目需求选择性启用各语言环境

---

## 6. 进阶建议：Starship 提示符

为了让 Zsh 看起来更现代和专业，强烈建议安装 **Starship**。它能显示 Git 分支、编程语言版本、执行时间等丰富的信息。

### 安装 Starship

```bash
curl -sS https://starship.rs/install.sh | sh
```

### 在 Zsh 中启用 Starship

在 `~/.zshrc` 末尾添加：

```bash
# Starship 初始化
eval "$(starship init zsh)"
```

### 自定义 Starship 配置（可选）

Starship 的配置文件位于 `~/.config/starship.toml`。创建基础配置：

```toml
# Starship 基础配置
format = """
$username\
$hostname\
$directory\
$git_branch\
$git_status\
$language\
$line_break\
$character"""

# 命令行符号
[character]
success_symbol = "[➜](bold green)"
error_symbol = "[➜](bold red)"

# 显示当前用户和主机名（可选）
[username]
show_always = false

[hostname]
ssh_only = false
```

### 配置后重启终端

```bash
source ~/.zshrc
```

现在，重启你的终端，享受飞一般的开发体验吧！

---

## 7. 常见问题与 IDE 协作

### 解决 VS Code / rust-analyzer 路径识别问题

如果你在 VS Code 中遇到 rust-analyzer 报错（例如不认识新版本 Rust 的 edition），通常是因为 VS Code 没能继承 Zsh 的环境变量，转而调用了系统自带的旧版工具链。

**解决方案**：

1. **方案一：在 VS Code 的 settings.json 中手动注入正确的 PATH**：

```json
{
  "rust-analyzer.server.path": "~/.cargo/bin/rust-analyzer",
  "rust-analyzer.linkedProjects": ["path/to/your/project/Cargo.toml"],
  "terminal.integrated.defaultProfile.linux": "zsh",
  "terminal.integrated.defaultProfile.osx": "zsh"
}
```

2. **方案二：确保 VS Code 使用 Zsh 作为终端**：

在 VS Code 的命令面板（Ctrl+Shift+P）中搜索 "Terminal: Select Default Profile"，选择 `zsh`。

### 彻底清理旧版干扰

如果系统中存在旧版工具链（如通过 apt 安装的旧版 rust-analyzer），可能会导致版本冲突。建议将其卸载：

```bash
# Ubuntu/Debian
sudo apt remove rust-analyzer

# macOS
brew uninstall rust-analyzer
```

### 验证 PATH 配置是否正确

在终端中运行以下命令验证你的路径设置：

```bash
# 查看 Rust 工具链路径
which rustc
which cargo
which rust-analyzer

# 查看 Node.js 版本
node --version
npm --version

# 查看 Go 版本
go version
```

确保这些命令指向你期望的位置（通常是 `~/.cargo/bin`、`~/.fnm/versions` 等）。

---

## 8. 快捷键自定义与优化（可选）

如果你想自定义快捷键以获得更好的使用体验，可以在 `~/.zshrc` 中添加自定义绑定。例如：

**将自动补全快捷键改成 Ctrl+F**

```bash
bindkey '^F' autosuggest-accept
```

**其他常用快捷键**

```bash
# Ctrl+U：清除光标前的内容
bindkey '^U' backward-kill-line

# Ctrl+K：清除光标后的内容
bindkey '^K' kill-line

# Ctrl+A：移到行首
bindkey '^A' beginning-of-line

# Ctrl+E：移到行尾
bindkey '^E' end-of-line

# Alt+D：删除光标后的一个词
bindkey '^[d' kill-word

# Alt+B：向后移动一个词
bindkey '^[b' backward-word

# Alt+F：向前移动一个词
bindkey '^[f' forward-word
```

保存后重新加载：

```bash
source ~/.zshrc
```

---

## 9. 快速参考：开发语言工具速查表

### 快速安装命令一览

| 语言/工具          | 安装命令                                                          | 关键配置                                                                    |
| ------------------ | ----------------------------------------------------------------- | --------------------------------------------------------------------------- |
| **Python (uv)**    | `curl -LsSf https://astral.sh/uv/install.sh \| sh`                | `export PATH="$HOME/.local/bin:$PATH"`                                      |
| **Python (pyenv)** | `brew install pyenv`                                              | `eval "$(pyenv init -)"`                                                    |
| **Node.js (fnm)**  | `curl -fsSL https://fnm.vercel.app/install \| bash`               | `eval "$(fnm env --use-on-cd)"`                                             |
| **Bun**            | `curl -fsSL https://bun.sh/install \| bash`                       | `export PATH="$HOME/.bun/bin:$PATH"`                                        |
| **Rust**           | `curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs \| sh` | `export PATH="$HOME/.cargo/bin:$PATH"`                                      |
| **Go**             | `brew install go`                                                 | `export GOPATH=$HOME/go; export PATH="/usr/local/go/bin:$GOPATH/bin:$PATH"` |
| **Java (SDKMAN)**  | `curl -s "https://get.sdkman.io" \| bash`                         | `source "$HOME/.sdkman/bin/sdkman-init.sh"`                                 |
| **PHP**            | `brew install php@8.3`                                            | `export PATH="/usr/local/opt/php@8.3/bin:$PATH"`                            |
| **Ruby (rbenv)**   | `brew install rbenv ruby-build`                                   | `eval "$(rbenv init -)"`                                                    |
| **Kotlin**         | `brew install kotlin`                                             | —                                                                           |
| **Docker**         | 官网下载或 `brew install --cask docker`                           | —                                                                           |
| **Mise**           | `curl https://mise.jdx.dev/install.sh \| sh`                      | `eval "$(mise activate zsh)"`                                               |

### 按场景快速选择

| 场景                | 推荐工具组合                      |
| ------------------- | --------------------------------- |
| **全栈 JavaScript** | fnm + pnpm + Bun + Node.js        |
| **Python 数据科学** | pyenv + uv + Jupyter              |
| **Go 后端**         | Go + Docker + PostgreSQL          |
| **Rust 系统编程**   | Rust + Cargo + LLVM               |
| **Java 企业开发**   | SDKMAN + Maven/Gradle + Docker    |
| **PHP Web 开发**    | PHP + Composer + Laravel + Docker |
| **Ruby Web 开发**   | rbenv + Bundler + Rails + Docker  |
| **多语言全栈**      | Mise + Docker + fnm + pyenv       |

---

## 总结对比：Zsh vs Fish

| 特性       | Zsh      | Fish     |
| ---------- | -------- | -------- |
| 开箱体验   | 需要配置 | 开箱即用 |
| 学习成本   | 中等     | 低       |
| 社区活跃度 | 非常活跃 | 活跃     |
| 扩展性     | 极强     | 强       |
| 性能       | 优秀     | 优秀     |
| IDE 兼容性 | 优秀     | 良好     |
| 自定义能力 | 极强     | 中等     |

虽然 Zsh 初期需要一些配置工作，但一旦配置完成，它提供的灵活性和强大功能是 Fish 无法比拟的。特别是对于那些需要在多个项目之间频繁切换的开发者来说，Zsh 的定制能力让它成为更优的选择。

---

## 10. 项目级别的环境隔离（.zshenv）

如果你的不同项目需要不同的环境配置，可以在项目根目录创建 `.zshenv` 文件：

```bash
# .zshenv（项目根目录）
export PYTHON_VERSION="3.11"
export NODE_VERSION="18"
export RUST_BACKTRACE="1"
```

使用 Mise 在项目目录中自动切换版本：

```bash
# .mise.toml（项目根目录）
[tools]
python = "3.11"
node = "18"
go = "1.21"
```

这样每次进入项目目录，Zsh 都会自动使用该项目配置的版本。

---

## 11. 性能优化建议

如果你的 Zsh 启动变慢，可以尝试以下优化：

### 诊断启动时间

```bash
# 查看 Zsh 启动过程中的耗时
time zsh -i -c exit
```

### 常见瓶颈与解决方案

1. **太多插件加载**
   - 注释掉不常用的插件
   - 使用 `Oh My Zsh` 的 lazy loading 功能

2. **版本管理工具初始化慢**
   - 改用 Mise 统一管理（启动更快）
   - 考虑使用 `direnv` 代替自动检测

3. **Git 仓库状态检查**
   - 对大型仓库禁用 Git 状态显示
   - 使用 Starship 的 `truncation_length` 限制路径显示

4. **历史搜索插件过多**
   - 只启用必要的搜索插件
   - 定期清理 `.zsh_history` 文件

### 示例：加速配置

```bash
# 在 .zshrc 中添加
# 禁用某些大仓库的 Git 状态检查
export GIT_OPTIONAL_LOCKS=0

# 限制历史搜索范围
HISTFILE=~/.zsh_history
HISTSIZE=5000

# 如果使用 Starship，优化配置
export STARSHIP_CONFIG=~/.config/starship.toml
```

---

## 12. 故障排除与常见问题

### 问题 1：插件无法加载

**症状**：重启 Zsh 后某个插件不生效

**解决**：

```bash
# 检查插件是否正确安装
ls ~/.oh-my-zsh/custom/plugins/

# 重新安装特定插件
rm -rf ~/.oh-my-zsh/custom/plugins/plugin-name
git clone https://github.com/xxx/plugin-name ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/plugin-name

# 重载配置
source ~/.zshrc
```

### 问题 2：环境变量在 IDE 中无法识别

**症状**：在 VS Code 中某个开发工具找不到

**解决**：

```bash
# 方案 1：确保 IDE 使用 Zsh 终端
# VS Code settings.json:
{
  "terminal.integrated.defaultProfile.osx": "zsh"
}

# 方案 2：在 IDE 的集成终端中验证
which rustc
which node
which python3

# 方案 3：使用完整路径在 IDE 设置中指定工具位置
```

### 问题 3：fzf 无法工作

**症状**：`Ctrl+R` 没有打开搜索框

**解决**：

```bash
# 检查 fzf 是否正确安装
which fzf

# 重新运行 fzf 安装脚本
~/.fzf/install

# 检查 .zshrc 中是否有 fzf 的初始化代码
grep "fzf" ~/.zshrc
```

### 问题 4：Starship 提示符显示不正确

**症状**：Starship 显示乱码或不显示某些信息

**解决**：

```bash
# 确保安装了 Nerd Font（包含特殊符号）
# 在 iTerm2 或终端设置中选择 Nerd Font

# 检查 Starship 配置
starship config

# 重新初始化 Starship
eval "$(starship init zsh)"
source ~/.zshrc
```

---

## 13. 推荐的 Nerd Font 安装

为了让 Zsh 和 Starship 显示完美的符号，安装 Nerd Font：

```bash
# macOS
brew tap homebrew/cask-fonts
brew install --cask font-jetbrains-mono-nerd-font

# 或使用其他流行字体
brew install --cask font-fira-code-nerd-font
brew install --cask font-inconsolata-nerd-font
```

然后在你的终端或 IDE 中选择这个字体即可。

---

## 参考资源

### Shell & Terminal

- [Oh My Zsh 官方文档](https://ohmyzsh.sh/)
- [Starship 官方文档](https://starship.rs/)
- [fzf GitHub 仓库](https://github.com/junegunn/fzf)
- [zsh-autosuggestions](https://github.com/zsh-users/zsh-autosuggestions)
- [zsh-syntax-highlighting](https://github.com/zsh-users/zsh-syntax-highlighting)
- [zsh-history-substring-search](https://github.com/zsh-users/zsh-history-substring-search)

### 版本管理工具

- [fnm (Fast Node Manager)](https://fnm.vercel.app/)
- [pyenv](https://github.com/pyenv/pyenv)
- [rbenv](https://github.com/rbenv/rbenv)
- [Mise](https://mise.jdx.dev/)
- [asdf](https://asdf-vm.com/)
- [SDKMAN!](https://sdkman.io/)

### Python 生态

- [uv (UV package manager)](https://astral.sh/uv)
- [Poetry](https://python-poetry.org/)
- [Anaconda](https://www.anaconda.com/)
- [Pipenv](https://pipenv.pypa.io/)

### Node.js 生态

- [Node.js 官方](https://nodejs.org/)
- [Bun](https://bun.sh/)
- [pnpm](https://pnpm.io/)
- [npm](https://www.npmjs.com/)
- [Yarn](https://yarnpkg.com/)

### Rust 生态

- [Rustup](https://rustup.rs/)
- [Cargo](https://doc.rust-lang.org/cargo/)

### Go 生态

- [Go 官方](https://golang.org/)
- [Go Modules](https://go.dev/blog/using-go-modules)

### Java 生态

- [SDKMAN!](https://sdkman.io/)
- [Maven](https://maven.apache.org/)
- [Gradle](https://gradle.org/)
- [Temurin OpenJDK](https://adoptium.net/)

### PHP 生态

- [Composer](https://getcomposer.org/)
- [Laravel](https://laravel.com/)
- [Symfony](https://symfony.com/)

### Ruby 生态

- [rbenv](https://github.com/rbenv/rbenv)
- [Bundler](https://bundler.io/)
- [Rails](https://rubyonrails.org/)
- [RubyGems](https://rubygems.org/)

### C/C++ 开发

- [CMake](https://cmake.org/)
- [GCC](https://gcc.gnu.org/)
- [LLVM/Clang](https://clang.llvm.org/)

### 容器化与部署

- [Docker 官方](https://www.docker.com/)
- [Docker Compose](https://docs.docker.com/compose/)
- [Kubernetes](https://kubernetes.io/)
- [Helm](https://helm.sh/)
- [kubectl](https://kubernetes.io/docs/reference/kubectl/)

### 数据库

- [PostgreSQL](https://www.postgresql.org/)
- [MySQL](https://www.mysql.com/)
- [SQLite](https://www.sqlite.org/)
- [DBeaver](https://dbeaver.io/)

### 字体

- [Nerd Fonts](https://www.nerdfonts.com/)
- [JetBrains Mono](https://www.jetbrains.com/lp/mono/)
